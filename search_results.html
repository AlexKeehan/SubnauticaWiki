<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>
    <link rel="stylesheet" href="CSS/main_styles.css" />
    <link rel="stylesheet" href="CSS/search_results_style.css" />
</head>
<body>
    <! Main Header>
    <header>
        <! Split it in three for better styling>
        <! Left side has title & logo>
        <div class="header_left">
            <! Source for game logo: https://subnautica.fandom.com/wiki/Subnautica_Wiki >
            <a href="index.html" class="logo_wrapper">
                <img src="subnautica_logo.webp" alt="logo" class="logo" />
            </a>
            <a href="index.html" class="title_wrapper">
                <h1 class="title">Subnautica</h1>
            </a>
        </div>
        <! Middle has search bar and navigation options>
        <div class="header_center">
            <form action="search_results.html" method="get" class="search_form">
                <input type="text" name="query" placeholder="Search For 'lava'" class="search_bar" />
                <button type="submit" class="search_button">Search</button>
            </form>
            <nav>
                <ul>
                    <li><a href="tools.html">Tools</a></li>
                    <li><a href="vehicles.html">Vehicles</a></li>
                    <li><a href="biomes.html">Biomes</a></li>
                    <li><a href="flora.html">Flora</a></li>
                    <li><a href="fauna.html">Fauna</a></li>
                    <li><a href="eggs.html">Eggs</a></li>
                    <li><a href="resources.html">Resources</a></li>
                </ul>
            </nav>
        </div>
        <! Right has login & signup options>
        <div class="header_right">
            <ul>
                <li><a href="login.html" class="login">Login</a></li>
                <li><a href="signup.html" class="signup">Signup</a></li>
            </ul>
        </div>
    </header>

    <main>
        <div class="list_main_wrapper">
            <section class="item_list" id="search_results"></section>
        </div>
    </main>

    <! Add footer>
    <footer>
        <div class="footer_content">
            <img src="subnautica_logo.webp" alt="logo" class="logo" />
            <h1 class="title">Subnautica</h1>
        </div>
    </footer>

    <script>

        // Simulate a list to search within
        // This will ultimately query the database once it is setup
        const biomes = [
            {name: "Blood Kelp Caves", type: "Biome", image: "Biomes/Biome Images/blood_kelp_caves.webp"},
            {name: "Blood Kelp Zone", type: "Biome", image: "Biomes/Biome Images/blood_kelp_zone.webp"},
            {name: "Bone Field Caves", type: "Biome", image: "Biomes/Biome Images/bone_field_caves.webp"},
            {name: "Bulb Zone", type: "Biome", image: "Biomes/Biome Images/bulb_zone.webp"},
            {name: "Bulb Zone Caves", type: "Biome", image: "Biomes/Biome Images/bulb_zone_caves.webp"},
            {name: "Crag Field", type: "Biome", image: "Biomes/Biome Images/crag_field.webp"},
            {name: "Crash Zone", type: "Biome", image: "Biomes/Biome Images/crash_zone.webp"},
            {name: "Crash Zone Mesas", type: "Biome", image: "Biomes/Biome Images/crash_zone_mesas.webp"},
            {name: "Crater Edge", type: "Biome", image: "Biomes/Biome Images/crater_edge.webp"},
            {name: "Deep Grand Reef", type: "Biome", image: "Biomes/Biome Images/deep_grand_reef.webp"},
            {name: "Deep Sparse Reef", type: "Biome", image: "Biomes/Biome Images/deep_sparse_reef.webp"},
            {name: "Dunes", type: "Biome", image: "Biomes/Biome Images/dunes.webp"},
            {name: "Dunes Caves", type: "Biome", image: "Biomes/Biome Images/dunes_caves.webp"},
            {name: "Floating Island", type: "Biome", image: "Biomes/Biome Images/floating_island.webp"},
            {name: "Grand Reef", type: "Biome", image: "Biomes/Biome Images/grand_reef.webp"},
            {name: "Grand Reef Caves", type: "Biome", image: "Biomes/Biome Images/grand_reef_caves.webp"},
            {name: "Grassy Plateaus", type: "Biome", image: "Biomes/Biome Images/grassy_plateaus.webp"},
            {name: "Grassy Plateaus Caves", type: "Biome", image: "Biomes/Biome Images/grassy_plateaus_caves.webp"},
            {name: "Inactive Lava Zone", type: "Biome", image: "Biomes/Biome Images/inactive_lava_zone.webp"},
            {name: "Inactive Lava Zone Corridor", type: "Biome", image: "Biomes/Biome Images/inactive_lava_zone_corridor.webp"},
            {name: "Jellyshroom Caves", type: "Biome", image: "Biomes/Biome Images/jellyshroom_caves.webp"},
            {name: "Kelp Forest", type: "Biome", image: "Biomes/Biome Images/kelp_forest.webp"},
            {name: "Kelp Forest Caves", type: "Biome", image: "Biomes/Biome Images/kelp_forest_caves.webp"},
            {name: "Lava Castle", type: "Biome", image: "Biomes/Biome Images/lava_castle.webp"},
            {name: "Lava Geyser", type: "Biome", image: "Biomes/Biome Images/lava_geyser.webp"},
            {name: "Lava Lakes", type: "Biome", image: "Biomes/Biome Images/lava_lakes.webp"},
            {name: "Lost River", type: "Biome", image: "Biomes/Biome Images/lost_river.webp"},
            {name: "Mountain Island", type: "Biome", image: "Biomes/Biome Images/mountain_island.webp"},
            {name: "Mountains", type: "Biome", image: "Biomes/Biome Images/mountains.webp"},
            {name: "Mountains Caves", type: "Biome", image: "Biomes/Biome Images/mountains_caves.webp"},
            {name: "Mushroom Forest", type: "Biome", image: "Biomes/Biome Images/mushroom_forest.webp"},
            {name: "Mushroom Forest Caves", type: "Biome", image: "Biomes/Biome Images/mushroom_forest_caves.webp"},
            {name: "Safe Shallows", type: "Biome", image: "Biomes/Biome Images/safe_shallows.webp"},
            {name: "Safe Shallows Caves", type: "Biome", image: "Biomes/Biome Images/safe_shallows_caves.webp"},
            {name: "Sea Treader's Path", type: "Biome", image: "Biomes/Biome Images/sea_treaders_path.webp"},
            {name: "Sea Treader's Tunnel Caves", type: "Biome", image: "Biomes/Biome Images/sea_treaders_tunnel_caves.webp"},
            {name: "Sparse Reef", type: "Biome", image: "Biomes/Biome Images/sparse_reef.webp"},
            {name: "Underwater Islands", type: "Biome", image: "Biomes/Biome Images/underwater_islands.webp"},
            {name: "Underwater Islands Caves", type: "Biome", image: "Biomes/Biome Images/underwater_islands_caves.webp"},
        ]
        // Get params from url
        const urlParams = new URLSearchParams(window.location.search);
        const query = urlParams.get('query');

        // Functino to search for query in given list
        function search(query) {
            if (!query) return [];

            return biomes.filter(item => item.name.toLowerCase().includes(query.toLowerCase()))
        }

        // Function to format the Biome name to redirect to correct file
        function formatName(name) {
            return `Biomes/${name.toLowerCase().replace(/\s+/g, '_')}.html`;
        }

        const search_results = search(query);

        const resultsCont = document.getElementById('search_results');
        if (search_results.length > 0) {
            const resultsList = search_results.map(item => {
                const biomeUrl = formatName(item.name);
                return `
                    <div class="item">
                        <div class="item_pic">
                        <img src="${item.image}" alt="${item.name} image" class="item_img"/>
                        </div>
                        <div class="item_info">
                            <a class="item_name" href="${biomeUrl}"><strong>${item.name}</strong></a>
                            <p class="item_type">${item.type}</p>
                        </div>
                    </div>`;
            }).join('');
            resultsCont.innerHTML = resultsList;
        }
        else {
            resultsCont.innerHTML = `<p class="no_results">No results found for: <strong>'${query}'</strong></p>`;
        }
    </script>
</body>

